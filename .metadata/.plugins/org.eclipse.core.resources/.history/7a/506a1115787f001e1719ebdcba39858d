<div class="my-5">
	<h1 class="text-center mb-5">마이페이지</h1>
	<div id="div_mypage" class="row justify-content-center mx-5"></div>
</div>

<script id="temp_mypage" type="x-handlebars-template">
	<div class="col-md-6">
		<div class="text-center mb-5">
			<img id="photo" src="http://via.placeholder.com/150x150" width="150" class="photo">
			<input type="file" id="file" style="display:none">
			<div class="mt-2"><button class="btn btn-outline-secondary px-4">사진저장</button></div>
		</div>
		<div class="text-center card p-3">
			<div>{{uname}}</div>
			<div>{{phone}}</div>
			<div>{{address1}} {{address2}}</div>
			<div class="my-3">
				<a href="/users/update" class="btn btn-outline-secondary px-4">정보수정</a>
			</div>
		</div>		
	</div>
</script>
<script>
	getMypage();
	
	//이미지 변경
	$("#div_mypage").on("change", "#file", function(e){
		$("#div_mypage #photo").attr("src", URL.createObjectURL(e.target.files[0]));
	});

	$("#div_mypage").on("click", "#photo", function(){
		$("#div_mypage #file").click();	
	});
	
	function getMypage(){
		$.ajax({
			type:"get",
			url:"/users/read",
			data:{uid:sessionStorage.getItem("uid")},
			success:function(data){
				//console.log(data);
				const temp=Handlebars.compile($("#temp_mypage").html());
				$("#div_mypage").html(temp(data));
			}
		});
	}
</script>